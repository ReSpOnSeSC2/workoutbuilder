<!DOCTYPE html>
<html>
<head>
    <title>Customizable Workout Split Builder</title>
    <!-- Responsive design -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* Basic styling */
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        h1, h2, h3 {
            color: #333;
        }
        .workout-day {
            margin-bottom: 30px;
        }
        .exercise-group {
            margin-top: 10px;
            cursor: move;
        }
        select, input, button, textarea, label {
            margin-right: 10px;
            margin-top: 5px;
        }
        button {
            padding: 5px 10px;
        }
        .exercise-list {
            list-style-type: none;
            padding: 0;
        }
        .exercise-list li {
            margin-bottom: 5px;
        }
        #output {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ccc;
        }
        /* Responsive design */
        @media (max-width: 600px) {
            body {
                margin: 10px;
            }
            select, input, button, textarea, label {
                display: block;
                margin-right: 0;
                width: 100%;
            }
            .exercise-group {
                margin-bottom: 15px;
            }
        }
        /* Print-friendly format */
        @media print {
            button {
                display: none;
            }
        }
    </style>
    <!-- Include jQuery and jQuery UI for drag-and-drop functionality -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.0/jquery-ui.min.js"></script>
</head>
<body>
    <h1>Customizable Workout Split Builder</h1>
    <p>Select the number of workout days, adjust your splits for each day, and choose between single or double workouts per day.</p>

    <!-- Settings Section -->
    <h2>Workout Settings</h2>
    <label for="numDays">Number of Workout Days per Week:</label>
    <input type="number" id="numDays" min="1" max="7" value="6">
    <br>
    <label for="sessionsPerDay">Workouts per Day:</label>
    <select id="sessionsPerDay">
        <option value="1">1 (Single Workout)</option>
        <option value="2" selected>2 (Morning and Evening Workouts)</option>
    </select>
    <br>
    <button type="button" onclick="generateDays()">Set Up Workout Days</button>

    <form id="workoutForm">
        <!-- Workout Days will be generated here -->
        <div id="workoutDays"></div>

        <button type="button" onclick="generatePlan()">Generate Workout Plan</button>
    </form>

    <div id="output"></div>

    <script>
        const exerciseOptions = [
            'Bench Press',
            'Incline Dumbbell Press',
            'Chest Flyes',
            'Tricep Dips',
            'Tricep Pushdowns',
            'Close Grip Bench Press',
            'Skull Crushers',
            'Deadlifts',
            'Lat Pulldowns',
            'Pull Ups',
            'Seated Cable Rows',
            'Bicep Curls',
            'Hammer Curls',
            'Machine Curl',
            'Overhead Press',
            'Lateral Raises',
            'Front Raises',
            'Rear Delt Flyes',
            'Push Press',
            'Planks',
            'Russian Twists',
            'Hanging Leg Raises',
            'Squats',
            'Leg Press',
            'Leg Extensions',
            'Romanian Deadlifts',
            'Lying Leg Curls',
            'Good Mornings',
            'Belt Squat',
            'Jump Squat',
            'Lunges',
            'Step Ups',
            'Hip Thrusts',
            'Glute Bridges',
            'Cable Kickbacks',
            // Custom exercise placeholder
            'Custom Exercise'
        ];

        function generateDays() {
            const numDays = document.getElementById('numDays').value;
            const sessionsPerDay = document.getElementById('sessionsPerDay').value;
            const workoutDaysDiv = document.getElementById('workoutDays');
            workoutDaysDiv.innerHTML = '';

            for (let i = 1; i <= numDays; i++) {
                const dayDiv = document.createElement('div');
                dayDiv.className = 'workout-day';

                let dayTitle = `Day ${i}`;
                dayDiv.innerHTML = `<h2>${dayTitle}</h2>`;

                // Split Adjustment
                dayDiv.innerHTML += `
                    <label>Muscle Groups for this Day:</label>
                    <input type="text" placeholder="e.g., Chest and Triceps">
                    <br>
                `;

                // Notes Section
                dayDiv.innerHTML += `
                    <textarea placeholder="Notes or comments for ${dayTitle}" rows="3" cols="50"></textarea>
                `;

                // Sessions
                for (let s = 1; s <= sessionsPerDay; s++) {
                    const sessionTime = sessionsPerDay == 2 ? (s == 1 ? 'Morning Workout' : 'Evening Workout') : '';
                    const sessionId = `day${i}_session${s}`;
                    dayDiv.innerHTML += `
                        <h3>${sessionTime}</h3>
                        <ul id="${sessionId}" class="exercise-list"></ul>
                        <button type="button" onclick="addExercise('${sessionId}')">Add Exercise</button>
                    `;
                }

                workoutDaysDiv.appendChild(dayDiv);
            }
        }

        function addExercise(sessionId) {
            const list = document.getElementById(sessionId);
            const listItem = document.createElement('li');
            listItem.className = 'exercise-group';
            listItem.innerHTML = `
                <label>Exercise:</label>
                <select onchange="checkCustomExercise(this)">
                    ${exerciseOptions.map(exercise => `<option>${exercise}</option>`).join('')}
                </select>
                <input type="text" placeholder="Custom Exercise Name" style="display:none;">
                <input type="number" placeholder="Sets" min="1">
                <input type="text" placeholder="Reps or Rep Range">
                <label><input type="checkbox" onchange="toggleWeightInput(this)"> Use % of 1RM</label>
                <input type="number" placeholder="Weight (lbs)" step="0.1">
                <input type="number" placeholder="% of 1RM" style="display:none;" min="1" max="100">
                <input type="number" placeholder="Rest (secs)" min="0">
                <button type="button" onclick="removeExercise(this)">Remove</button>
            `;
            list.appendChild(listItem);

            // Make the list sortable
            $('#' + sessionId).sortable();
        }

        function removeExercise(button) {
            const listItem = button.parentElement;
            listItem.parentElement.removeChild(listItem);
        }

        function checkCustomExercise(selectElement) {
            const customInput = selectElement.nextElementSibling;
            if (selectElement.value === 'Custom Exercise') {
                customInput.style.display = 'inline-block';
            } else {
                customInput.style.display = 'none';
            }
        }

        function toggleWeightInput(checkbox) {
            const weightInput = checkbox.parentElement.nextElementSibling;
            const percentInput = weightInput.nextElementSibling;
            if (checkbox.checked) {
                weightInput.style.display = 'none';
                percentInput.style.display = 'inline-block';
            } else {
                weightInput.style.display = 'inline-block';
                percentInput.style.display = 'none';
            }
        }

        function generatePlan() {
            const days = document.querySelectorAll(".workout-day");
            let workoutPlan = "";

            days.forEach(day => {
                const dayHeader = day.querySelector("h2").textContent;
                const muscleGroupsInput = day.querySelector("input[type='text']");
                const muscleGroups = muscleGroupsInput ? muscleGroupsInput.value : '';
                const notes = day.querySelector("textarea") ? day.querySelector("textarea").value : '';
                const sessions = day.querySelectorAll(".exercise-list");

                workoutPlan += dayHeader + "\n";
                if (muscleGroups) {
                    workoutPlan += "Muscle Groups: " + muscleGroups + "\n";
                }
                if (notes) {
                    workoutPlan += "Notes: " + notes + "\n";
                }

                sessions.forEach((session, index) => {
                    const sessionTime = sessions.length == 2 ? (index == 0 ? 'Morning Workout' : 'Evening Workout') : 'Workout';
                    workoutPlan += sessionTime + "\n";
                    const exercises = session.querySelectorAll(".exercise-group");

                    exercises.forEach(exercise => {
                        const selects = exercise.querySelectorAll("select");
                        const inputs = exercise.querySelectorAll("input");
                        const checkboxes = exercise.querySelectorAll("input[type='checkbox']");

                        let exerciseName = selects[0].value;
                        let inputIndex = 1;

                        if (exerciseName === 'Custom Exercise') {
                            exerciseName = inputs[0].value || 'Custom Exercise';
                            inputIndex++;
                        }

                        const sets = inputs[inputIndex++].value || "0";
                        const reps = inputs[inputIndex++].value || "0";
                        const usePercent = checkboxes[0].checked;

                        let weight;
                        if (usePercent) {
                            weight = inputs[inputIndex++].value || "0";
                            weight += "% of 1RM";
                            inputIndex++; // Skip the hidden weight input
                        } else {
                            weight = inputs[inputIndex++].value || "0";
                            inputIndex++; // Skip the hidden percent input
                        }

                        const rest = inputs[inputIndex++].value || "0";

                        workoutPlan += ` - ${exerciseName}: ${sets} sets x ${reps} reps @ ${weight}, Rest: ${rest} secs\n`;
                    });
                });

                workoutPlan += "\n";
            });

            // Display in output section
            document.getElementById("output").textContent = workoutPlan;

            // Save as text file
            const blob = new Blob([workoutPlan], { type: "text/plain" });
            const url = URL.createObjectURL(blob);
            const downloadLink = document.createElement("a");
            downloadLink.href = url;
            downloadLink.download = "WorkoutPlan.txt";
            downloadLink.textContent = "Download Workout Plan as Text File";
            downloadLink.style.display = "block";
            document.getElementById("output").appendChild(downloadLink);

            // Generate PDF link
            const pdfLink = document.createElement("a");
            pdfLink.href = "javascript:void(0);";
            pdfLink.textContent = "Generate PDF (requires backend support)";
            pdfLink.style.display = "block";
            pdfLink.onclick = () => alert("PDF generation requires backend support.");
            document.getElementById("output").appendChild(pdfLink);
        }

        // Initialize the workout days on page load
        generateDays();
    </script>
</body>
</html>
